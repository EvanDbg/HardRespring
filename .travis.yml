os: osx
language: objective-c
osx_image: xcode10.1
sudo: false
env:
  global:
  - THEOS=~/theos
before_install:
- brew install dpkg ldid
- git clone --recursive git://github.com/theos/theos.git ~/theos
script:
- make clean package FINALPACKAGE=1
before_deploy:
- git config --local user.name "EvanDbg"
- git config --local user.email "yangf1023@icloud.com"
- export RELEASE_PKG_FILE=$(ls ./packages/*.deb)
- export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
- git tag $TRAVIS_TAG
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: bjvOArlgPVfsnDcF/qPV7Yz0fq66mt+DD5EWBUFy2a2eq1U04GiBCaQm5q+XkZLMKQZsUSKZj9lC+TLdjzJC9dUxQtifOv3WdzvV3/481Y+QTS3XTLuqr2vba0Glkd5TuH9dZBf5FKxrKsOBn2jn18UyQ8kTNImKxwx7gdv5EGt++AMOSnkBWdPaQSc435Ag2FR2ssOHd3DvtvZc+Xp+eoCZYXRXS2kSuWBtlsx8ztC9a1ObiB0mZGX4vJZQz4YaqrnYkzEoeenXcyAZvImfCsP+eEFv/0aU41uMzWeZEjrkI5a+cm9XNGfewTWp+sxzfRbP6jW0n5xVUQHpRDahRyyBFEQskrEldUiTFjPJD3vi54l7trof/jvKgGRsBTM2yrvzC+gC1y06wNv2c0NLUV5OzPEOsKTRbrgs8BmznmVOjzQIRWO414nkztcCffF62cRFYKAhcP4MYBhw/jBlREwUeisFwox+SpyG2LELKW1ZS0W7Y5GbuvZTzhZH8aJGudOx/VrjrIvMcmAjHNApdoqpj9FNlWX3fnfhQBHQj00CA0RkWVJnx/UQvh9t1c0qT0OucfQp8mA0emnLZcC7uEFvGSuwfto3NGXak0WTv3CLuQ8sTXO0m36iyUQSsSbNNdKoMNV6RiAj9sxfE+pBH0GWHl6gCkSX7uDEF4ujm/g=
  file_glob: true
  file: "${RELEASE_PKG_FILE}"
  on:
    repo: EvanDbg/HardRespring
    branch: main
