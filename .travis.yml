os: osx
language: objective-c
osx_image: xcode10.1
sudo: false
env:
  global:
  - THEOS=~/theos
before_install:
- brew install dpkg ldid
- git clone --recursive git://github.com/theos/theos.git ~/theos
script:
- make clean package FINALPACKAGE=1
before_deploy:
- git config --local user.name "EvanDbg"
- git config --local user.email "yangf1023@icloud.com"
- export RELEASE_PKG_FILE=$(ls ./packages/*.deb)
- export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
- git tag $TRAVIS_TAG
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: TXmCXy8MmleBHxED8pHhi9GZRZq/3Lujl9x9Dd8f8ZB4u+191xIMAx2hrs3ctE2/T3XzyaqYce9Ng3r8GIM4409qOx0Ra+En4HLIhTLrGLQfCUuFE5RWB5IKrYB73fDpLBfEsKCjM0mlaHbm2tNMJE5KO+ikaNxR1c/ckB2F3MgoBHwSZ4NvCW7R2ABBLvGHbM7Ca/pmsCr2NhbFiiSlW2mVyiVFIsHFmCjNLZxL8bZQIam94sR2xkbKanUNkoeMZZ8AiCyQ6xTtrSGPz4hpdhzgxEMgGLsFaXYq6mSuAPXQzg+vy/l/vLEfCVVVNRd8u6MOK1ficV4ga21QYvgtIqhg2JejKPpTxeygjh5prM30R+gZSz5TB5b5/OQTYAqrlTJTALHnHx828oxyvjTSM8sAVRXHaK/FleaQjK/L2RySEjJCANUyh65Smn+z5HSDVdTt++lXKCspxWrdBCLJVZjjGRX3f88GrkCcODUJ1Jvf/WXWamoMpQMGvv+tN5fSQdOOIF6zpllwKdQZD47eweDt9Kl38rKho7wRwr8nQw4WdyhFDbb6tk30Q8XQRDrBCz5uKkeDK8xsT7Z/TWCIXOmu7gw0TdoLIcTgz7P03AtnxBPgdxuvA4lim5bwQhMagYatpZTZJQ+pwBsOLMEK+Usf9bt/kVDciYuIO6vsWZQ=
  file_glob: true
  file: "${RELEASE_PKG_FILE}"
  on:
    repo: EvanDbg/HardRespring
    branch: main
