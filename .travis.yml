os: osx
language: objective-c
osx_image: xcode10.1
sudo: false
env:
  global:
  - THEOS=~/theos
before_install:
- brew install dpkg ldid
- git clone --recursive git://github.com/theos/theos.git ~/theos
script:
- make clean package FINALPACKAGE=1
before_deploy:
- git config --local user.name "EvanDbg"
- git config --local user.email "yangf1023@icloud.com"
- export RELEASE_PKG_FILE=$(ls ./packages/*.deb)
- export TRAVIS_TAG=${TRAVIS_TAG:-$(date +'%Y%m%d%H%M%S')-$(git log --format=%h -1)}
- git tag $TRAVIS_TAG
deploy:
  provider: releases
  skip_cleanup: true
  api_key:
    secure: "TQ8J7VxozoWZFq5j0rLCs+bvDVCOaTa0/MSLrgCUD7snrstjacTQKiGE4kWpyJyGy5ta4s+B1aUmH1o2T0+4MdMRys8vP1oQ67fVPtrd0iJzmeY/D3at5ttw+9lcdk1WHMQCjgUoavRU8d+Gx9dPMb91oSOdw6M6bwQC9mYQoiFnUzxg9Im9tnLLbfJlE9Qd2/szEP4+HBFGt0V1gtriwCBKUB318VjiKzN15/ruUOjiCn19pa7nMhF6mU1yITuWCDxmSfpIHBdjk69YmKffptVXnQ197eWkaaaISouCRyqOWuHVqaTe5bebNNbN+SAkhOb7ksJm03sZQelj738P8WyjNpEzpEyZEPbaZw5S9yGk82KxYgXo/LgJB++fb22L0pTJwvoSNCNcBdh9HDWgaTANJCnS9GpKs0LqkDhvv4n3q75WfkqJnbNtIo2hNUYlP2g9zdiLO1Dn4gR9QIRKSTZw/fAd4mpgfo5sTkPUywDn9RDX3gTRGE3KC5yzoV5eou+e+ZsWU9i+tqp18ED5ivcDwFcDW4O7TxEKqa7qnqN+nPMK2LZUBBIhERMLlgGDnsoTLmAx6jD5Ei1W+QB+jjGvj0EoL7hmIuQTpgt1ZUmO1JGrMZOyg8+6F4bW7i9Mvn2FeAc39CAX1pbGxy219+zqmuw39woq7jnvGvw1S+M="
  file_glob: true
  file: "${RELEASE_PKG_FILE}"
  on:
    repo: EvanDbg/HardRespring
    branch: main